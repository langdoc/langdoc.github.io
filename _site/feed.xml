<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Language Documentation</title>
    <description></description>
    <link>http://langdoc.github.io/</link>
    <atom:link href="http://langdoc.github.io/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Sun, 21 Jun 2015 17:38:46 +0200</pubDate>
    <lastBuildDate>Sun, 21 Jun 2015 17:38:46 +0200</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>Google Docs and Markdown</title>
        <description>&lt;p&gt;We were recently writing a small abstract together with a few colleagues (Michael Rießler and Hanna Thiele). We started in Dropbox, but that is, as usually, quite bad in intensive writing. In principle we could use other tools we use already anyway, GitHub or SVN, but the same problem remains that it would be very convenient to see what others are editing and use some clear system for commenting.&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;I personally like to write this kind of simple things in Markdown. It has several advantages over LaTeX. It is easy, fast to type and allows good connection with bibtex bibliography. So I started to think whether there is some way to combine the best of both worlds. I know there are some other collaborative editors for Markdown itself, but there were some other reasons to stick to Google Docs. I have one colleague with who I collaborate regularly, who uses ChromeBook as his main computer. Thereby for him it is the best to stick into that. And this means that for me it is the best to figure out some ways to use Google Docs more effectively.&lt;/p&gt;

&lt;p&gt;The workflow presented here was inspired by this &lt;a href=&quot;http://ericpgreen.com/reproducible-research-with-word/&quot;&gt;blogpost&lt;/a&gt; by Eric P. Green, though it is not at all that sophisticated.&lt;/p&gt;

&lt;p&gt;All code is stored in a GitHub &lt;a href=&quot;www.github.com/langdoc/GoogleDocs_with_md&quot;&gt;repository&lt;/a&gt;, but I go it through here piece by piece. Here are the steps that come.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Create a YAML header&lt;/li&gt;
  &lt;li&gt;Download text from Google Docs&lt;/li&gt;
  &lt;li&gt;Remove mysterious NUL character from the beginning of file&lt;/li&gt;
  &lt;li&gt;Delete the comments that may be present&lt;/li&gt;
  &lt;li&gt;Combine the header and the text&lt;/li&gt;
  &lt;li&gt;Write those into a markdown document&lt;/li&gt;
  &lt;li&gt;Render HTML&lt;/li&gt;
  &lt;li&gt;Render PDF&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It is really very simple. &lt;strong&gt;The idea is to read data directly from Google Docs.&lt;/strong&gt; And it allows &lt;a href=&quot;https://docs.google.com/document/d/1D1C_79nLDM25r96dWinufVUd70-ipsHzv6cK-9cK-Io/edit?usp=sharing&quot;&gt;this&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/figures/example_gdocs.png&quot; alt=&quot;Google Docs&quot; /&gt;&lt;/p&gt;

&lt;p&gt;To be turned into something like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/media/figures/example_pdf.png&quot; alt=&quot;Example PDF&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Or into an HTML page, or into .docx file, or .epub, or basically into anything &lt;a href=&quot;http://pandoc.org/&quot;&gt;Pandoc&lt;/a&gt; supports. So let’s go through step by step how this works.&lt;/p&gt;

&lt;h3 id=&quot;the-header&quot;&gt;The header&lt;/h3&gt;

&lt;p&gt;Header is a simple block of YAML. We are telling it the date, author, title, the location of a bibliography and other such details. It depends a bit from our desired output format what we want to have here, as we can also pass many of these settings directly into Pandoc. Here we just save the header as a character string.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;header &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;#39;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;title: &amp;quot;Collaborative authoring in Google Docs&amp;quot;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;author: &amp;quot;Niko Partanen&amp;quot;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;date: &amp;quot;19 Jun 2015&amp;quot;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;pdf_document:&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;        keep_tex: yes&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;bibliography: ./bibtex/FRibliography_example.bib&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;reading-the-file&quot;&gt;Reading the file&lt;/h3&gt;

&lt;p&gt;Then we read the file from Google Docs and write it as a file. The link to Google Docs is very easy to generate. You can get the document ID from the link you use to share it.&lt;/p&gt;

&lt;p&gt;The structure is like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;https://docs.google.com/document/d/put-id-here/export?format=txt
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;One could have there also some other format, but a simple text file is the best for now.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;readr&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

doc &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; read_file&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;https://docs.google.com/document/d/1D1C_79nLDM25r96dWinufVUd70-ipsHzv6cK-9cK-Io/export?format=txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

fileConn &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;temp.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kp&quot;&gt;writeLines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;doc&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fileConn&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kp&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fileConn&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;removing-the-nul-character&quot;&gt;Removing the NUL character&lt;/h3&gt;

&lt;p&gt;For some reason the text file contains a &lt;a href=&quot;https://en.wikipedia.org/wiki/Null_character&quot;&gt;NUL character&lt;/a&gt; in the beginning of the first line. I don’t understand at all what it is doing there, but R, LaTeX and Pandoc are all giving errors for it later, so having it around is unacceptable. I was trying to find out how to delete it for quite some time, and ended up to do it from Terminal, by simply removing those first bytes.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kp&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;cat temp.txt | tail -c +4 &amp;gt; temp_clean.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

doc &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; read_file&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;temp_clean.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I would be very happy to know if there is some easier way to do this!&lt;/p&gt;

&lt;h3 id=&quot;removing-the-comments&quot;&gt;Removing the comments&lt;/h3&gt;

&lt;p&gt;It is possible that there are some comments left into the document. They have formatting like [a] or [b] in the text, and the actual comment text comes to the end. I assume there could be some way to turn them into footnotes in the PDF, but at the moment I just want to delete them.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;doc &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;(.+## References).+&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;\\1&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; doc&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
doc &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;\\[.\\]&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; doc&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;putting-it-together&quot;&gt;Putting it together&lt;/h3&gt;

&lt;p&gt;Then we simply paste together the header and the document. This is then written into a new Markdown document.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;full_paper &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;paste0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;header&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; doc&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

fileConn &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;example.md&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kp&quot;&gt;writeLines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;full_paper&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; fileConn&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kp&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;fileConn&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;converting-the-files&quot;&gt;Converting the files&lt;/h3&gt;

&lt;p&gt;After this we can start to convert the file. Now I convert it into HTML and PDF. &lt;strong&gt;Note for linguists:&lt;/strong&gt; The default fonts used here are not very good for any exotic script. There are lots of situations where the basic fonts in principle can handle what you have there, but in some specific situations (such as within a code block) the font in that environment doesn’t have what you need. Well, this is how the things always are with typography and lesser used languages. But remember to play with Pandoc font settings if you have any non-latin stuff there.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kn&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;rmarkdown&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

render&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;example.md&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; output_format &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;html_document&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kp&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;pandoc example.md --latex-engine=xelatex --biblio ./bibtex/FRibliography_example.bib -o example.pdf --variable mainfont=Georgia&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;We can even turn it into an EPUB! Not that this would be necessary, but it is possible! I like epubs a lot, not really for scientific texts, but for normal books they are pleasant to use.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kp&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;pandoc example.md --biblio ./bibtex/FRibliography_example.bib -o example.epub&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/media/figures/example_epub.png&quot; alt=&quot;epub&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now there are already some font issues rising their ugly heads…&lt;/p&gt;

&lt;p&gt;As the last thing I also convert the PDF into a picture used in the beginning of this post. It uses free program &lt;a href=&quot;http://www.imagemagick.org/script/index.php&quot;&gt;ImageMagick&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-r&quot; data-lang=&quot;r&quot;&gt;&lt;span class=&quot;kp&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;convert -density 300  example.pdf example.png&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The script can be downloaded in one piece from &lt;a href=&quot;www.github.com/langdoc/GoogleDocs_with_md/compile_gdocs.R&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 22 Jun 2015 01:55:14 +0200</pubDate>
        <link>http://langdoc.github.io/2015/06/22/google_docs.html</link>
        <guid isPermaLink="true">http://langdoc.github.io/2015/06/22/google_docs.html</guid>
        
        <category>R</category>
        
        <category>workflows</category>
        
        
      </item>
    
      <item>
        <title>Moving files in Terminal</title>
        <description>&lt;p&gt;It is very common that we have a large amount of files in one folder, and then for whatever reason we decide that we would need to create for each filename a unique folder, where the different files sharing same name but different endings could reside. I had recently lots of ELAN files which I wanted to move into their own directories. I believe this is a very common situation, so I wanted to share it. &lt;!--more--&gt; It can be done with these three commands. Just copy paste them one by one to the Terminal.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;First command:&lt;/strong&gt; This makes the directories with the name of each ELAN file&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ls | grep &#39;\.eaf$&#39; | sed &#39;s/.eaf//g&#39; | xargs mkdir
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Second command:&lt;/strong&gt; This uses grep to pick all ELAN files, then creates variables for different things and repeats the move for each file&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/bash
for file in `ls | grep &#39;\.eaf$&#39;`
do
    SESSIONNAME=$(echo $file | sed &#39;s/.eaf//g&#39;)
    MOVFILE=&quot;$file&quot;
    MOVDESTINATION=&quot;./$SESSIONNAME/$file&quot;
    /bin/mv $MOVFILE $MOVDESTINATION;
done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Third command:&lt;/strong&gt; This does exactly the same as the second but for pfsx files.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/bash
for file in `ls | grep &#39;\.pfsx$&#39;`
do
    SESSIONNAME=$(echo $file | sed &#39;s/.pfsx//g&#39;)
    MOVFILE=&quot;$file&quot;
    MOVDESTINATION=&quot;./$SESSIONNAME/$file&quot;
    /bin/mv $MOVFILE $MOVDESTINATION;
done
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I did the same recently with a folder full of mp3 and wav files. The model is identical, just the filename differs. This can be a convenient way to rearrange messy file structure, just to start dragging everything into one folder and move onward with commands like these. This also forces to check that all files are consistently named, which is of course necessary for well structured corpus.&lt;/p&gt;
</description>
        <pubDate>Tue, 19 May 2015 01:55:14 +0200</pubDate>
        <link>http://langdoc.github.io/2015/05/19/moving_files.html</link>
        <guid isPermaLink="true">http://langdoc.github.io/2015/05/19/moving_files.html</guid>
        
        <category>Terminal</category>
        
        
      </item>
    
      <item>
        <title>Welcome to the site</title>
        <description>&lt;p&gt;While we document the endangered languages of the world there is quite a lot to do. Data quality, data content, connection with the speech communities, managing different audio and video files – this is in many ways extremely difficult job to do. One would assume that the technical solutions which we use would had been designed to make this work as easy as possible. Somehow this does not seem to be the case. Technology is just a tool, our real questions are about the languages.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;How often do we update our archived data? I think it is often done maybe every half a year, just because the uploading process is so inconvenient, slow and unreliable. I’m certain this is not intentional. Surely everyone has done their part well and the tools are designed to work in the best possible manner. But something has gone wrong.&lt;/p&gt;

&lt;p&gt;Filling metadata should be so easy that one does it just for joy of keeping things ordered the easiest possible way. Similarly, archiving should be so easy that one just syncs the newest files in the end of the day. Press a button, collect your stuff, tidy your desk – beep – sync done. Repeat every day you do something with your data.&lt;/p&gt;

&lt;p&gt;This should be possible with current technology. We believe this doesn’t need to be so difficult. There are better solutions for almost any aspect of our digital data management, and we are going to figure out what those are.&lt;/p&gt;

&lt;p&gt;At times the tools we need do not exist. But then we have to build them. Luckily, programming nowadays has started to remind more and more building with Legos. There are so many packages and modules for all kinds of languages (R, Python, Ruby – whatever one needs) floating around GitHub and other repositories that often 70% of the work is already done. It’s just about combining those pieces together in a way that contributes to language documentation workflow.&lt;/p&gt;

&lt;p&gt;This site, LangDoc, has been built in order to disseminate our ideas and practices. It is divided into individual blogposts. We will also have independent daughter sites for specific projects and datasets.&lt;/p&gt;
</description>
        <pubDate>Sun, 17 May 2015 01:55:14 +0200</pubDate>
        <link>http://langdoc.github.io/2015/05/17/langdoc.html</link>
        <guid isPermaLink="true">http://langdoc.github.io/2015/05/17/langdoc.html</guid>
        
        
      </item>
    
  </channel>
</rss>
